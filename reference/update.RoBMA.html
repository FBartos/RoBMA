<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Updates a fitted RoBMA object — update.RoBMA • RoBMA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Updates a fitted RoBMA object — update.RoBMA"><meta name="description" content='update.RoBMA can be used to
add an additional model to an existing "RoBMA" object by
specifying either a null or alternative prior for each parameter
and the prior odds of the model (prior_weights), see the
vignette("CustomEnsembles") vignette,
change the prior odds of fitted models by specifying a vector
prior_weights of the same length as the fitted models,
refitting models that failed to converge with updated settings
of control parameters,
or changing the convergence criteria and recalculating the ensemble
results by specifying new control argument and setting
refit_failed == FALSE.

'><meta property="og:description" content='update.RoBMA can be used to
add an additional model to an existing "RoBMA" object by
specifying either a null or alternative prior for each parameter
and the prior odds of the model (prior_weights), see the
vignette("CustomEnsembles") vignette,
change the prior odds of fitted models by specifying a vector
prior_weights of the same length as the fitted models,
refitting models that failed to converge with updated settings
of control parameters,
or changing the convergence criteria and recalculating the ensemble
results by specifying new control argument and setting
refit_failed == FALSE.

'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RoBMA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CustomEnsembles.html">Fitting Custom Meta-Analytic Ensembles</a></li>
    <li><a class="dropdown-item" href="../articles/FastRoBMA.html">Fast Robust Bayesian Meta-Analysis via Spike and Slab Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/HierarchicalBMA.html">Hierarchical Bayesian Model-Averaged Meta-Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/MedicineBiBMA.html">Informed Bayesian Model-Averaged Meta-Analysis with Binary Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/MedicineBMA.html">Informed Bayesian Model-Averaged Meta-Analysis in Medicine</a></li>
    <li><a class="dropdown-item" href="../articles/MetaRegression.html">Robust Bayesian Model-Averaged Meta-Regression</a></li>
    <li><a class="dropdown-item" href="../articles/ReproducingBMA.html">Reproducing Bayesian Model-Averaged Meta-Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Tutorial.html">Tutorial: Adjusting for Publication Bias in JASP and R - Selection Models, PET-PEESE, and Robust Bayesian Meta-Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/FBartos/RoBMA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Updates a fitted RoBMA object</h1>
      <small class="dont-index">Source: <a href="https://github.com/FBartos/RoBMA/blob/v3.5.0/R/RoBMA.R" class="external-link"><code>R/RoBMA.R</code></a></small>
      <div class="d-none name"><code>update.RoBMA.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>update.RoBMA</code> can be used to</p><ol><li><p>add an additional model to an existing <code>"RoBMA"</code> object by
specifying either a null or alternative prior for each parameter
and the prior odds of the model (<code>prior_weights</code>), see the
<code><a href="../articles/CustomEnsembles.html">vignette("CustomEnsembles")</a></code> vignette,</p></li>
<li><p>change the prior odds of fitted models by specifying a vector
<code>prior_weights</code> of the same length as the fitted models,</p></li>
<li><p>refitting models that failed to converge with updated settings
of control parameters,</p></li>
<li><p>or changing the convergence criteria and recalculating the ensemble
results by specifying new <code>control</code> argument and setting
<code>refit_failed == FALSE</code>.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'RoBMA'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  refit_failed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  extend_all <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  prior_effect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_heterogeneity <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_bias <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_hierarchical <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_effect_null <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_heterogeneity_null <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_bias_null <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_hierarchical_null <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  study_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  chains <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adapt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  burnin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  thin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  autofit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  autofit_control <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  convergence_checks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>a fitted RoBMA object</p></dd>


<dt id="arg-refit-failed">refit_failed<a class="anchor" aria-label="anchor" href="#arg-refit-failed"></a></dt>
<dd><p>whether failed models should be refitted. Relevant only
if new priors or <code>prior_weights</code> are not supplied. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-extend-all">extend_all<a class="anchor" aria-label="anchor" href="#arg-extend-all"></a></dt>
<dd><p>extend sampling in all fitted models based on <code>"sample_extend"</code>
argument in <code><a href="RoBMA_control.html">set_autofit_control()</a></code> function. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-prior-effect">prior_effect<a class="anchor" aria-label="anchor" href="#arg-prior-effect"></a></dt>
<dd><p>prior distribution for the effect size (<code>mu</code>)
parameter that will be treated as belonging to the alternative hypothesis.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prior-heterogeneity">prior_heterogeneity<a class="anchor" aria-label="anchor" href="#arg-prior-heterogeneity"></a></dt>
<dd><p>prior distribution for the heterogeneity <code>tau</code>
parameter that will be treated as belonging to the alternative hypothesis.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prior-bias">prior_bias<a class="anchor" aria-label="anchor" href="#arg-prior-bias"></a></dt>
<dd><p>prior distribution for the publication bias adjustment
component that will be treated as belonging to the alternative hypothesis.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prior-hierarchical">prior_hierarchical<a class="anchor" aria-label="anchor" href="#arg-prior-hierarchical"></a></dt>
<dd><p>prior distribution for the correlation of random effects
(<code>rho</code>) parameter that will be treated as belonging to the alternative hypothesis. This setting allows
users to fit a hierarchical (three-level) meta-analysis when <code>study_ids</code> are supplied.
Note that this is an experimental feature and see News for more details. Defaults to a beta distribution
<code>prior(distribution = "beta", parameters = list(alpha = 1, beta = 1))</code>.</p></dd>


<dt id="arg-prior-weights">prior_weights<a class="anchor" aria-label="anchor" href="#arg-prior-weights"></a></dt>
<dd><p>either a single value specifying prior model weight
of a newly specified model using priors argument, or a vector of the
same length as already fitted models to update their prior weights.</p></dd>


<dt id="arg-prior-effect-null">prior_effect_null<a class="anchor" aria-label="anchor" href="#arg-prior-effect-null"></a></dt>
<dd><p>prior distribution for the effect size (<code>mu</code>)
parameter that will be treated as belonging to the null hypothesis.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prior-heterogeneity-null">prior_heterogeneity_null<a class="anchor" aria-label="anchor" href="#arg-prior-heterogeneity-null"></a></dt>
<dd><p>prior distribution for the heterogeneity <code>tau</code>
parameter that will be treated as belonging to the null hypothesis.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prior-bias-null">prior_bias_null<a class="anchor" aria-label="anchor" href="#arg-prior-bias-null"></a></dt>
<dd><p>prior distribution for the publication bias adjustment
component that will be treated as belonging to the null hypothesis.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prior-hierarchical-null">prior_hierarchical_null<a class="anchor" aria-label="anchor" href="#arg-prior-hierarchical-null"></a></dt>
<dd><p>prior distribution for the correlation of random effects
(<code>rho</code>) parameter that will be treated as belonging to the null hypothesis. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-study-names">study_names<a class="anchor" aria-label="anchor" href="#arg-study-names"></a></dt>
<dd><p>an optional argument with the names of the studies</p></dd>


<dt id="arg-chains">chains<a class="anchor" aria-label="anchor" href="#arg-chains"></a></dt>
<dd><p>a number of chains of the MCMC algorithm.</p></dd>


<dt id="arg-adapt">adapt<a class="anchor" aria-label="anchor" href="#arg-adapt"></a></dt>
<dd><p>a number of adaptation iterations of the MCMC algorithm.
Defaults to <code>500</code>.</p></dd>


<dt id="arg-burnin">burnin<a class="anchor" aria-label="anchor" href="#arg-burnin"></a></dt>
<dd><p>a number of burnin iterations of the MCMC algorithm.
Defaults to <code>2000</code>.</p></dd>


<dt id="arg-sample">sample<a class="anchor" aria-label="anchor" href="#arg-sample"></a></dt>
<dd><p>a number of sampling iterations of the MCMC algorithm.
Defaults to <code>5000</code>.</p></dd>


<dt id="arg-thin">thin<a class="anchor" aria-label="anchor" href="#arg-thin"></a></dt>
<dd><p>a thinning of the chains of the MCMC algorithm. Defaults to
<code>1</code>.</p></dd>


<dt id="arg-autofit">autofit<a class="anchor" aria-label="anchor" href="#arg-autofit"></a></dt>
<dd><p>whether the model should be fitted until the convergence
criteria (specified in <code>autofit_control</code>) are satisfied. Defaults to
<code>TRUE</code>.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>whether the individual models should be fitted in parallel.
Defaults to <code>FALSE</code>. The implementation is not completely stable
and might cause a connection error.</p></dd>


<dt id="arg-autofit-control">autofit_control<a class="anchor" aria-label="anchor" href="#arg-autofit-control"></a></dt>
<dd><p>allows to pass autofit control settings with the
<code><a href="RoBMA_control.html">set_autofit_control()</a></code> function. See <code><a href="RoBMA_control.html">?set_autofit_control</a></code> for
options and default settings.</p></dd>


<dt id="arg-convergence-checks">convergence_checks<a class="anchor" aria-label="anchor" href="#arg-convergence-checks"></a></dt>
<dd><p>automatic convergence checks to assess the fitted
models, passed with <code><a href="RoBMA_control.html">set_convergence_checks()</a></code> function. See
<code><a href="RoBMA_control.html">?set_convergence_checks</a></code> for options and default settings.</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>whether all models posterior distributions should be kept
after obtaining a model-averaged result. Defaults to <code>"all"</code> which
does not remove anything. Set to <code>"min"</code> to significantly reduce
the size of final object, however, some model diagnostics and further
manipulation with the object will not be possible.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>a seed to be set before model fitting, marginal likelihood
computation, and posterior mixing for reproducibility of results. Defaults
to <code>NULL</code> - no seed is set.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>whether all print messages regarding the fitting process
should be suppressed. Defaults to <code>TRUE</code>. Note that <code>parallel = TRUE</code>
also suppresses all messages.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>RoBMA</code> returns an object of class 'RoBMA'.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <code><a href="RoBMA.html">RoBMA()</a></code> for more details.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="RoBMA.html">RoBMA()</a></code>, <code><a href="summary.RoBMA.html">summary.RoBMA()</a></code>, <code><a href="prior.html">prior()</a></code>, <code><a href="check_setup.html">check_setup()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># using the example data from Bem 2011 and fitting the default (RoBMA-PSMA) model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="RoBMA.html">RoBMA</a></span><span class="op">(</span>d <span class="op">=</span> <span class="va">Bem2011</span><span class="op">$</span><span class="va">d</span>, se <span class="op">=</span> <span class="va">Bem2011</span><span class="op">$</span><span class="va">se</span>, study_names <span class="op">=</span> <span class="va">Bem2011</span><span class="op">$</span><span class="va">study</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the update function allows us to change the prior model weights of each model</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">fit</span>, prior_weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">35</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add an additional model with different priors specification</span></span></span>
<span class="r-in"><span><span class="co"># (see '?prior' for more information)</span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">fit</span>,</span></span>
<span class="r-in"><span>               priors_effect_null <span class="op">=</span> <span class="fu"><a href="prior.html">prior</a></span><span class="op">(</span><span class="st">"point"</span>, parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>location <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               priors_heterogeneity <span class="op">=</span> <span class="fu"><a href="prior.html">prior</a></span><span class="op">(</span><span class="st">"normal"</span>,</span></span>
<span class="r-in"><span>                                  parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  truncation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">0</span>, upper <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               priors_bias <span class="op">=</span> <span class="fu"><a href="prior_weightfunction.html">prior_weightfunction</a></span><span class="op">(</span><span class="st">"one-sided"</span>,</span></span>
<span class="r-in"><span>                                    parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cuts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.10</span>, <span class="fl">.20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                      alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># update the models with an increased number of sample iterations</span></span></span>
<span class="r-in"><span><span class="va">fit3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">fit</span>, autofit_control <span class="op">=</span> <span class="fu"><a href="RoBMA_control.html">set_autofit_control</a></span><span class="op">(</span>sample_extend <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>, extend_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by František Bartoš, Maximilian Maier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

