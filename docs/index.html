<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Robust Bayesian Meta-Analyses • RoBMA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Robust Bayesian Meta-Analyses">
<meta property="og:description" content="A framework for estimating ensembles of meta-analytic models
    (assuming either presence or absence of the effect, heterogeneity, and
    publication bias) and using Bayesian model averaging to combine them. The
    ensembles use Bayes factors to test for the presence or absence of the
    individual components (e.g., effect vs. no effect) and model-averages
    parameter estimates based on posterior model probabilities
    (Maier, Bartoš &amp; Wagenmakers, 2020, &lt;doi:10.31234/osf.io/u4cns&gt;). The user can
    define a wide range of non-informative or informative priors for the
    effect size, heterogeneity, and weight functions. The package provides
    convenient functions for summary, visualizations, and fit diagnostics.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">RoBMA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/CustomEnsembles.html">Fitting custom meta-analytic ensembles</a>
    </li>
    <li>
      <a href="articles/ReproducingBMA.html">Reproducing BMA</a>
    </li>
    <li>
      <a href="articles/WarningsAndErrors.html">Common warnings and errors</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/FBartos/RoBMA/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="readme" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#readme" class="anchor"></a>README</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
</div>
<div id="robust-bayesian-meta-analysis-robma" class="section level1">
<h1 class="hasAnchor">
<a href="#robust-bayesian-meta-analysis-robma" class="anchor"></a>Robust Bayesian Meta-Analysis (RoBMA)</h1>
<p>This package estimates an ensemble of meta-analytic models (assuming either presence or absence of the effect, heterogeneity, and publication bias) and uses Bayesian model averaging to combine them. The ensemble uses Bayes factors to test for the presence of absence of the individual components (e.g., effect vs. no effect) and model-averages parameter estimates based on posterior model probabilities. The user can define a wide range of non-informative or informative priors for the effect size, heterogeneity, and weight functions. The package provides convenient functions for summary, visualizations, and fit diagnostics.</p>
<p>See our preprint, Maier, Bartoš, &amp; Wagenmakers (2020) at <a href="https://doi.org/10.31234/osf.io/u4cns" class="uri">https://doi.org/10.31234/osf.io/u4cns</a>, for more details about the implementation, examples, and simulation studies.</p>
<p>We also prepared multiple vignettes that illustrate functionality of the package:</p>
<ul>
<li><a href="https://fbartos.github.io/RoBMA/articles/WarningsAndErrors.html">Explanation and dealing with warnings and errors</a></li>
<li><a href="https://fbartos.github.io/RoBMA/articles/ReproducingBMA.html">Reproducing Bayesian Model-Averaged Meta-Analysis (BMA)</a></li>
<li><a href="https://fbartos.github.io/RoBMA/articles/CustomEnsembles.html">Fitting custom meta-analytic ensembles</a></li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The package requires <a href="http://mcmc-jags.sourceforge.net/">JAGS 4.3.0</a> to be installed. The release version can be installed from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"RoBMA"</span>)</pre></div>
<p>and the development version of the package can be installed from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"fbartos/RoBMA"</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>To illustrate the functionality of the package, we reproduce<span class="math inline"><em></em><sup>1</sup></span> the example in Maier et al. (2020) where we use the RoBMA package to re-analyze a subset of Anderson et al. (2010) meta-analysis of effects of violent video games on aggression (the original dataset can be found <a href="https://github.com/Joe-Hilgard/Anderson-meta">here</a>).</p>
<p>First, we load the dataset which is included with the package. The dataset contains correlational coefficients, sample sizes, and labels for 27 experimental studies focusing on the effect of violent videogames on aggressive behavior.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">RoBMA</span>)
<span class="co">#&gt; Loading required namespace: runjags</span>
<span class="co">#&gt; module RoBMA loaded</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"Anderson2010"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"RoBMA"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">Anderson2010</span>)
<span class="co">#&gt;        r   n                    name</span>
<span class="co">#&gt; 1 0.2445  90 Anderson (2004; Exp. 2)</span>
<span class="co">#&gt; 2 0.1883 204 Anderson (2004; Exp. 3)</span>
<span class="co">#&gt; 3 0.2441 103     Anderson (in press)</span>
<span class="co">#&gt; 4 0.1585 196         Anderson (2000)</span>
<span class="co">#&gt; 5 0.1680 148          Arriaga (2008)</span>
<span class="co">#&gt; 6 0.2698  90         Anderson (2003)</span></pre></div>
<p>Then, we fit the meta-analytic model ensemble that is composed of 12 models (the default settings of RoBMA fitting function). These models are all possible combinations of priors for the following parameters (the prior parameters for <span class="math inline"><em>μ</em></span> and <span class="math inline"><em>τ</em></span> are defined on Cohen’s d transformed scale if correlation coefficients are supplied):</p>
<ul>
<li>
<span class="math inline"><em>μ</em></span> (the mean parameter)
<ul>
<li>a spike at zero, representing a null effect</li>
<li>a standard normal distribution, representing the alternative hypothesis</li>
</ul>
</li>
<li>
<span class="math inline"><em>τ</em></span> (the heterogeneity parameter)
<ul>
<li>a spike at zero, representing no heterogeneity (fixed effect)</li>
<li>an inverse gamma distribution with shape = 1 and scale = 0.15, representing presence of heterogeneity (random effects), based on Erp et al. (2017)</li>
</ul>
</li>
<li>
<span class="math inline"><em>ω</em></span> (the weights parameters for modeling publication bias)
<ul>
<li>a spike at 1, representing no publication bias (all studies have the same probability of being published)</li>
<li>a two-steps two-sided weight-function with <em>p</em>-values cut-off at 0.05 and weights following a cumulative sum of Dirichlet distribution with alpha = (1,1)</li>
<li>a three-steps two-sided weight-function with <em>p</em>-values cut-offs at 0.05 and 0.10 and weights following a cumulative sum of Dirichlet distribution with alpha = (1,1,1)</li>
</ul>
</li>
</ul>
<p>The prior odds of these prior distributions are by default set to make all three model categories equally likely a priory (0.5 prior probability of an effect, 0.5 prior probability of heterogeneity, and 0.5 prior probability of publication bias).</p>
<p>The default models using the correlation coefficients can then be fitted using the <code><a href="reference/RoBMA.html">RoBMA()</a></code> function (all input is internally transformed into t-statistics and degrees of freedom):</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">fit</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/RoBMA.html">RoBMA</a></span>(<span class="kw">r</span> <span class="kw">=</span> <span class="no">Anderson2010</span>$<span class="no">r</span>, <span class="kw">n</span> <span class="kw">=</span> <span class="no">Anderson2010</span>$<span class="no">n</span>, <span class="kw">study_names</span> <span class="kw">=</span> <span class="no">Anderson2010</span>$<span class="no">name</span>)</pre></div>
<p>The main model summary can be obtained using the <code><a href="reference/summary.RoBMA.html">summary.RoBMA()</a></code> function.</p>
<p>The first table shows an overview of the model types -the number of models, prior and posterior probability, and inclusion Bayes factor. As we can see, the data show strong evidence for the presence of effect and publication bias and weak evidence for lack of heterogeneity.</p>
<p>The second table shows model-averaged estimates weighted by the individual models’ posterior probabilities. The mean estimate <span class="math inline"><em>μ</em></span> (converted back to correlation scale) is considerably lower than in the original meta-analysis due to the publication bias correction. The heterogeneity estimate <span class="math inline"><em>τ</em></span> (on the Cohen’s d scale) has most of its probability mass around zero due to the higher support of models with no heterogeneity. The parameters omega, representing the weights at each <em>p</em>-value interval are decreasing with increasing <em>p</em>-values, showing the publication bias.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">fit</span>)
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; RoBMA(r = Anderson2010$r, n = Anderson2010$n, study_names = Anderson2010$name)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Robust Bayesian Meta-Analysis</span>
<span class="co">#&gt;               Models Prior prob. Post. prob.     Incl. BF</span>
<span class="co">#&gt; Effect          6/12       0.500       1.000 11286565.669</span>
<span class="co">#&gt; Heterogeneity   6/12       0.500       0.131        0.151</span>
<span class="co">#&gt; Pub. bias       8/12       0.500       0.998      532.522</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model-averaged estimates</span>
<span class="co">#&gt;                  Mean Median 0.025 0.975</span>
<span class="co">#&gt; mu              0.151  0.151 0.094 0.207</span>
<span class="co">#&gt; tau             0.010  0.000 0.000 0.098</span>
<span class="co">#&gt; omega[0,0.05]   1.000  1.000 1.000 1.000</span>
<span class="co">#&gt; omega[0.05,0.1] 0.515  0.502 0.100 0.962</span>
<span class="co">#&gt; omega[0.1,1]    0.122  0.095 0.020 0.367</span>
<span class="co">#&gt; (Tau is on Cohen's d scale.)</span>
<span class="co">#&gt; (Estimated omegas correspond to two-sided p-values)</span></pre></div>
<p>We can visualize the estimated parameters using the <code><a href="reference/plot.RoBMA.html">plot.RoBMA()</a></code> function. In the case of parameter tau, the arrow stands for probability mass at <span class="math inline"><em>τ</em></span> = 0. Weights <span class="math inline"><em>ω</em></span> are by default plotted as the weight function, which can be changed to the individual weights estimates by setting <code>weights = TRUE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">fit</span>, <span class="kw">parameter</span> <span class="kw">=</span> <span class="st">"mu"</span>)</pre></div>
<p><img src="reference/figures/README-fig_mu-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">fit</span>, <span class="kw">parameter</span> <span class="kw">=</span> <span class="st">"tau"</span>)</pre></div>
<p><img src="reference/figures/README-fig_tau-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">fit</span>, <span class="kw">parameter</span> <span class="kw">=</span> <span class="st">"omega"</span>)</pre></div>
<p><img src="reference/figures/README-fig_omega-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>Furthermore, we can inspect the individual models’ estimates mu, including the prior and posterior probability.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">fit</span>, <span class="kw">parameter</span> <span class="kw">=</span> <span class="st">"mu"</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"individual"</span>)</pre></div>
<p><img src="reference/figures/README-fig_mu_ind-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>Apart from plotting, the individual model performance can be inspected using the <code><a href="reference/summary.RoBMA.html">summary.RoBMA()</a></code> function with argument <code>type = "individual"</code>. An overview of the individual model MCMC diagnostics can be obtained by setting <code>type = "models", diagnostics = TRUE</code> (not shown here for the lack of space).</p>
<p>We can also visualize the MCMC diagnostics using the diagnostics function. The function can display the chains <code>type = "chain"</code> / posterior sample densities <code>type = "densities"</code>, and averaged autocorrelations <code>type = "autocorrelation"</code>. Here, we request the chains trace plot of the <span class="math inline"><em>μ</em></span> parameter of the most complex model by setting <code>show_models = 12</code> (the model numbers can be obtained from the summary function with <code>type = "models"</code> argument.)</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="kw pkg">RoBMA</span><span class="kw ns">::</span><span class="fu"><a href="reference/diagnostics.html">diagnostics</a></span>(<span class="no">fit</span>, <span class="kw">parameter</span> <span class="kw">=</span> <span class="st">"mu"</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"chains"</span>, <span class="kw">show_models</span> <span class="kw">=</span> <span class="fl">12</span>)</pre></div>
<p><img src="reference/figures/README-fig_mu_chain-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>The package allows to fit highly customized models with different prior distribution functions, prior model probabilities, and provides more visualization options. See the documentation to find out more about the specific functions: <code><a href="reference/RoBMA.html">RoBMA()</a></code>, <code>priors()</code>, <code><a href="reference/plot.RoBMA.html">plot.RoBMA()</a></code>. The main package functionalities are to be implemented within the Meta Analysis module of JASP 0.14 (JASP Team, 2020).</p>
<div id="footnotes" class="section level3">
<h3 class="hasAnchor">
<a href="#footnotes" class="anchor"></a>Footnotes</h3>
<p>1 - There have been changes in the way the seed is set since finishing the paper. Use the archival version of the package stored at the <a href="https://osf.io/buk8g/">OSF repository</a> to obtain identical results to those reported in the paper.</p>
</div>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h3>
<div id="refs" class="references">
<div id="ref-Anderson2010">
<p>Anderson, C. A., Shibuya, A., Ihori, N., Swing, E. L., Bushman, B. J., Sakamoto, A., Rothstein, H. R., &amp; Saleem, M. (2010). Violent video game effects on aggression, empathy, and prosocial behavior in Eastern and Western countries: A meta-analytic review. <em>Psychological Bulletin</em>, <em>136</em>(2), 151.</p>
</div>
<div id="ref-vanErp2017">
<p>Erp, S. van, Verhagen, J., Grasman, R. P., &amp; Wagenmakers, E.-J. (2017). Estimates of between-study heterogeneity for 705 meta-analyses reported in psychological bulletin from 1990–2013. <em>Journal of Open Psychology Data</em>, <em>5</em>(1).</p>
</div>
<div id="ref-jasp">
<p>JASP Team. (2020). <em>JASP (Version 0.14)</em>. <a href="https://jasp-stats.org/" class="uri">https://jasp-stats.org/</a></p>
</div>
<div id="ref-maier2020">
<p>Maier, M., Bartoš, F., &amp; Wagenmakers, E.-J. (2020). Robust Bayesian meta-analysis: Addressing publication bias with model-averaging. In <em>PsyArXiv</em>.</p>
</div>
</div>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=RoBMA">https://​cloud.r-project.org/​package=RoBMA</a>
</li>
<li>Browse source code at <br><a href="https://github.com/FBartos/RoBMA/">https://​github.com/​FBartos/​RoBMA/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/FBartos/RoBMA/issues">https://​github.com/​FBartos/​RoBMA/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing RoBMA</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>František Bartoš <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0018-5573" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Maximilian Maier <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9873-6096" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by František Bartoš, Maximilian Maier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
