<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Informed Bayesian Model-Averaged Meta-Analysis with Binary Outcomes • RoBMA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Informed Bayesian Model-Averaged Meta-Analysis with Binary Outcomes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RoBMA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/CustomEnsembles.html">Fitting Custom Meta-Analytic Ensembles</a></li>
    <li><a class="dropdown-item" href="../articles/FastRoBMA.html">Fast Robust Bayesian Meta-Analysis via Spike and Slab Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/HierarchicalBMA.html">Hierarchical Bayesian Model-Averaged Meta-Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/MedicineBiBMA.html">Informed Bayesian Model-Averaged Meta-Analysis with Binary Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/MedicineBMA.html">Informed Bayesian Model-Averaged Meta-Analysis in Medicine</a></li>
    <li><a class="dropdown-item" href="../articles/MetaRegression.html">Robust Bayesian Model-Averaged Meta-Regression</a></li>
    <li><a class="dropdown-item" href="../articles/ReproducingBMA.html">Reproducing Bayesian Model-Averaged Meta-Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Tutorial.html">Tutorial: Adjusting for Publication Bias in JASP and R - Selection Models, PET-PEESE, and Robust Bayesian Meta-Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/ZCurveDiagnostics.html">Z-Curve Publication Bias Diagnostics</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/FBartos/RoBMA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Informed Bayesian Model-Averaged Meta-Analysis with Binary Outcomes</h1>
                        <h4 data-toc-skip class="author">František
Bartoš</h4>
            
            <h4 data-toc-skip class="date">2025-09-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/FBartos/RoBMA/blob/master/vignettes/MedicineBiBMA.Rmd" class="external-link"><code>vignettes/MedicineBiBMA.Rmd</code></a></small>
      <div class="d-none name"><code>MedicineBiBMA.Rmd</code></div>
    </div>

    
    
<p>Bayesian model-averaged meta-analysis can be specified using the
binomial likelihood and applied to data with dichotomous outcomes. This
vignette illustrates how to do this with an example from <span class="citation">Bartoš et al. (2023)</span>, who implemented a
binomial-normal Bayesian model-averaged meta-analytic model and
developed informed prior distributions for meta-analyses of binary and
time-to-event outcomes based on the Cochrane database of systematic
reviews (see <span class="citation">Bartoš et al. (2021)</span> for
informed prior distributions for meta-analyses of continuous outcomes
highlighted in <a href="MedicineBMA.html">Informed Bayesian
Model-Averaged Meta-Analysis in Medicine</a> vignette.</p>
<div class="section level3">
<h3 id="binomial-normal-bayesian-model-averaged-meta-analysis">Binomial-Normal Bayesian Model-Averaged Meta-Analysis<a class="anchor" aria-label="anchor" href="#binomial-normal-bayesian-model-averaged-meta-analysis"></a>
</h3>
<p>We illustrate how to fit the binomial-normal Bayesian model-averaged
meta-analysis using the <code>RoBMA</code> R package. For this purpose,
we reproduce the example of adverse effects of honey in treating acute
cough in children from <span class="citation">Bartoš et al.
(2023)</span>, who reanalyzed two studies with adverse events of
nervousness, insomnia, or hyperactivity in the honey vs. no treatment
condition that were subjected to a meta-analysis by <span class="citation">Oduwole et al. (2018)</span>.</p>
<p>We load the RoBMA package and specify the number of adverse events
and sample sizes in each arm as described on p. 73 <span class="citation">(Oduwole et al., 2018)</span>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbartos.github.io/RoBMA/" class="external-link">RoBMA</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">events_experimental</span>        <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">events_control</span>             <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">observations_experimental</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">35</span>, <span class="fl">40</span><span class="op">)</span></span>
<span><span class="va">observations_control</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">39</span>, <span class="fl">40</span><span class="op">)</span></span>
<span><span class="va">study_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Paul 2007"</span>, <span class="st">"Shadkam 2010"</span><span class="op">)</span></span></code></pre></div>
<p>Notice that both studies reported no adverse events in the control
group. Using a normal-normal meta-analytic model with log odds ratios
would require a continuity correction, which might result in bias.
Binomial-normal models allow us to circumvent the issue by modeling the
observed proportions directly (see <span class="citation">Bartoš et al.
(2023)</span> for more details).</p>
<p>First, we fit the binomial-normal Bayesian model-averaged
meta-analysis using informed prior distributions based on the
<code>Acute Respiratory Infections</code> subfield. We use the
<code>BiBMA</code> function and specify the observed events
(<code>x1</code> and <code>x2</code>) and sample size (<code>n1</code>
and <code>n2</code>) of adverse events and sample sizes in each arm. We
use the <code>prior_informed</code> function to specify the informed
prior distributions for the individual medical subfields
automatically.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/BiBMA.html">BiBMA</a></span><span class="op">(</span></span>
<span>  x1          <span class="op">=</span> <span class="va">events_experimental</span>,</span>
<span>  x2          <span class="op">=</span> <span class="va">events_control</span>,</span>
<span>  n1          <span class="op">=</span> <span class="va">observations_experimental</span>,</span>
<span>  n2          <span class="op">=</span> <span class="va">observations_control</span>,</span>
<span>  study_names <span class="op">=</span> <span class="va">study_names</span>,</span>
<span>  priors_effect        <span class="op">=</span> <span class="fu"><a href="../reference/prior_informed.html">prior_informed</a></span><span class="op">(</span><span class="st">"Acute Respiratory Infections"</span>, type <span class="op">=</span> <span class="st">"logOR"</span>, parameter <span class="op">=</span> <span class="st">"effect"</span><span class="op">)</span>,</span>
<span>  priors_heterogeneity <span class="op">=</span> <span class="fu"><a href="../reference/prior_informed.html">prior_informed</a></span><span class="op">(</span><span class="st">"Acute Respiratory Infections"</span>, type <span class="op">=</span> <span class="st">"logOR"</span>, parameter <span class="op">=</span> <span class="st">"heterogeneity"</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>with <code>priors_effect</code> and <code>priors_heterogeneity</code>
corresponding to the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo>∼</mo><mi>T</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>0.48</mn><mo>,</mo><mn>3</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu \sim T(0,0.48,3)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi><mo>∼</mo><mi>I</mi><mi>n</mi><mi>v</mi><mi>G</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>1.67</mn><mo>,</mo><mn>0.45</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tau \sim InvGamma(1.67, 0.45)</annotation></semantics></math>
prior distributions (see <code><a href="../reference/prior_informed.html">?prior_informed</a></code> for more details
regarding the informed prior distributions).</p>
<p>We obtain the output with the <code>summary</code> function. Adding
the <code>conditional = TRUE</code> argument allows us to inspect the
conditional estimates, i.e., the effect size estimate assuming that the
models specifying the presence of the effect are true, and the
heterogeneity estimates assuming that the models specifying the presence
of heterogeneity are true. We also set the
<code>output_scale = "OR"</code> argument to display the effect size
estimates on the odds ratio scale.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span>, output_scale <span class="op">=</span> <span class="st">"OR"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; BiBMA(x1 = events_experimental, x2 = events_control, n1 = observations_experimental, </span></span>
<span><span class="co">#&gt;     n2 = observations_control, study_names = study_names, priors_effect = prior_informed("Acute Respiratory Infections", </span></span>
<span><span class="co">#&gt;         type = "logOR", parameter = "effect"), priors_heterogeneity = prior_informed("Acute Respiratory Infections", </span></span>
<span><span class="co">#&gt;         type = "logOR", parameter = "heterogeneity"), seed = 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian model-averaged meta-analysis (binomial-normal model)</span></span>
<span><span class="co">#&gt; Components summary:</span></span>
<span><span class="co">#&gt;               Models Prior prob. Post. prob. Inclusion BF</span></span>
<span><span class="co">#&gt; Effect           2/4       0.500       0.725        2.630</span></span>
<span><span class="co">#&gt; Heterogeneity    2/4       0.500       0.564        1.296</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model-averaged estimates:</span></span>
<span><span class="co">#&gt;      Mean Median 0.025  0.975</span></span>
<span><span class="co">#&gt; mu  3.389  1.642 0.842 15.143</span></span>
<span><span class="co">#&gt; tau 0.420  0.158 0.000  2.594</span></span>
<span><span class="co">#&gt; The effect size estimates are summarized on the OR scale and heterogeneity is summarized on the logOR scale (priors were specified on the log(OR) scale).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Conditional estimates:</span></span>
<span><span class="co">#&gt;      Mean Median 0.025  0.975</span></span>
<span><span class="co">#&gt; mu  4.242  2.261 0.781 17.613</span></span>
<span><span class="co">#&gt; tau 0.747  0.426 0.097  3.233</span></span>
<span><span class="co">#&gt; The effect size estimates are summarized on the OR scale and heterogeneity is summarized on the logOR scale (priors were specified on the log(OR) scale).</span></span></code></pre></div>
<p>The output from the <code><a href="../reference/summary.RoBMA.html">summary.RoBMA()</a></code> function has three
parts. The first part, under the ‘Robust Bayesian Meta-Analysis’ heading
provides a basic summary of the fitted models by component types
(presence of the Effect and Heterogeneity). The results show that the
inclusion Bayes factor for the effect corresponds to the one reported in
<span class="citation">Bartoš et al. (2023)</span>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="normal">BF</mtext><mn>10</mn></msub><mo>=</mo><mn>2.63</mn></mrow><annotation encoding="application/x-tex">\text{BF}_{10} = 2.63</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="normal">BF</mtext><mtext mathvariant="normal">rf</mtext></msub><mo>=</mo><mn>1.30</mn></mrow><annotation encoding="application/x-tex">\text{BF}_{\text{rf}} = 1.30</annotation></semantics></math>
(up to an MCMC error)—weak/undecided evidence for the presence of the
effect and heterogeneity.</p>
<p>The second part, under the ‘Model-averaged estimates’ heading
displays the parameter estimates model-averaged across all specified
models (i.e., including models specifying the effect size to be zero).
These estimates are shrunk towards the null hypotheses of null effect or
no heterogeneity in accordance with the posterior uncertainty about the
presence of the effect or heterogeneity. We find the model-averaged mean
effect OR = 3.39, 95% CI [0.84, 15.14], and a heterogeneity estimate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>τ</mi><mtext mathvariant="normal">logOR</mtext></msub><mo>=</mo><mn>0.42</mn></mrow><annotation encoding="application/x-tex">\tau_\text{logOR} = 0.42</annotation></semantics></math>,
95% CI [0.00, 2.59].</p>
<p>The third part, under the ‘Conditional estimates’ heading displays
the conditional effect size and heterogeneity estimates (i.e., estimates
assuming presence of the effect or heterogeneity) corresponding to the
one reported in <span class="citation">Bartoš et al. (2023)</span>, OR =
4.24, 95% CI [0.78, 17.61], and a heterogeneity estimate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>τ</mi><mtext mathvariant="normal">logOR</mtext></msub><mo>=</mo><mn>0.75</mn></mrow><annotation encoding="application/x-tex">\tau_\text{logOR} = 0.75</annotation></semantics></math>,
95% CI [0.10, 3.23].</p>
<p>We can also visualize the posterior distributions of the effect size
and heterogeneity parameters using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function.
Here, we set the <code>conditional = TRUE</code> argument to display the
conditional effect size estimate and <code>prior = TRUE</code> to
include the prior distribution in the plot.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"mu"</span>, prior <span class="op">=</span> <span class="cn">TRUE</span>, conditional <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="MedicineBiBMA_files/figure-html/fig_mu_BMA-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>Additional visualizations and summaries are demonstrated in the <a href="ReproducingBMA.html">Reproducing BMA</a> and <a href="MedicineBMA.html">Informed Bayesian Model-Averaged Meta-Analysis
in Medicine</a> vignettes.</p>
</div>
<div class="section level3 unnumbered">
<h3 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-bartos2021bayesian" class="csl-entry">
Bartoš, F., Gronau, Q. F., Timmers, B., Otte, W. M., Ly, A., &amp;
Wagenmakers, E.-J. (2021). Bayesian model-averaged meta-analysis in
medicine. <em>Statistics in Medicine</em>, <em>40</em>(30), 6743–6761.
<a href="https://doi.org/10.1002/sim.9170" class="external-link">https://doi.org/10.1002/sim.9170</a>
</div>
<div id="ref-bartos2023empirical" class="csl-entry">
Bartoš, F., Otte, W. M., Gronau, Q. F., Timmers, B., Ly, A., &amp;
Wagenmakers, E.-J. (2023). <em>Empirical prior distributions for
<span>B</span>ayesian meta-analyses of binary and time-to-event
outcomes</em>. <a href="https://doi.org/10.48550/arXiv.2306.11468" class="external-link">https://doi.org/10.48550/arXiv.2306.11468</a>
</div>
<div id="ref-oduwole2018honey" class="csl-entry">
Oduwole, O., Udoh, E. E., Oyo-Ita, A., &amp; Meremikwu, M. M. (2018).
Honey for acute cough in children. <em>Cochrane Database of Systematic
Reviews</em>, <em>4</em>. <a href="https://doi.org/10.1002/14651858.CD007094.pub5" class="external-link">https://doi.org/10.1002/14651858.CD007094.pub5</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by František Bartoš, Maximilian Maier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
